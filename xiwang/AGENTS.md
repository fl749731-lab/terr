# Repository Guidelines

## Project Structure & Module Organization
- Root: `xiwang.csproj` (imports tModLoader targets), `xiwang.cs` (mod entry class).
- Content: place gameplay code under `Content/` (e.g., `Content/Items`, `Content/NPCs`, `Content/Tiles`) with namespaces like `xiwang.Content.Items`.
- Localization: `Localization/en-US_Mods.xiwang.hjson` holds strings; new entries are autogenerated on Build + Reload.
- Properties: `Properties/launchSettings.json` provides “Terraria” and “TerrariaServer” debug profiles.
- Packaging: `build.txt`, `description*.txt`, `icon*.png` control display name, author, version, and workshop metadata.

## Build, Test, and Development Commands
- Build + Reload: in tModLoader client, open `Mods` → `Build + Reload` (compiles and hot-loads this mod).
- Debug (client): run the `Terraria` profile from your IDE (uses `launchSettings.json`).
- Debug (server): run the `TerrariaServer` profile for headless testing.
- Logs: check `%UserProfile%\\Documents\\My Games\\Terraria\\tModLoader\\Logs\\client.log` (or `server.log`) for errors.
- Clean build: if stuck, close tML and remove `bin/` and `obj/` under this mod folder.

## Coding Style & Naming Conventions
- Language: C#; 4-space indentation; UTF-8 files; trailing whitespace trimmed.
- Namespaces: prefix with `xiwang.*`. Classes/Methods: PascalCase. Fields/locals: camelCase. Constants: ALL_CAPS.
- Layout: one public type per file. Group by feature: `Content/Items/`, `Content/NPCs/`, etc.
- Comments: XML doc summaries for public APIs; concise, task-focused remarks elsewhere.
- Formatting: use your IDE’s C# formatter; avoid mixed tabs/spaces.

## Testing Guidelines
- Framework: manual in-game testing via Build + Reload; prefer server profile for logic-only changes.
- Scenarios: load mod, create a test world, verify crafting/usage/tooltips, and localization keys.
- Configs: gate experimental features behind a `ModConfig` toggle to ease verification.

## Commit & Pull Request Guidelines
- Commits: use Conventional Commits (e.g., `feat(items): add copper wand`, `fix(npcs): null ref on spawn`).
- PRs: include a clear description, linked issues, screenshots/GIFs for visual changes, and test steps.
- Versioning: bump `version` in `build.txt`; update `description*.txt` to reflect changes.

## Security & Configuration Tips
- Do not commit secrets or machine-specific paths. Keep assets optimized (PNG, sensible sizes for icons).
- Respect tModLoader structure; avoid global side effects in static initializers.
